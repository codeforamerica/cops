<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Code for America | Brigade</title>
    <!-- Check the CfA Style Guide at https://style.codeforamerica.org/ -->
    <link rel="stylesheet" href="http://style.codeforamerica.org/style/css/main.css">
    <link rel="stylesheet" href="http://style.codeforamerica.org/style/css/layout.css" media="all and (min-width: 40em)">

    <link rel="shortcut icon" type="image/x-icon" href="https://style.codeforamerica.org/1/favicon.ico">
    <link rel="apple-touch-icon-precomposed" href="https://style.codeforamerica.org/1/style/favicons/60x60/flag-red.png"/>

    <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pagedown/1.0/Markdown.Converter.min.js"></script>
  </head>

  <body>

  <div class="js-container">

      <nav class="nav-global-primary">
      </nav>

      <div class="global-header">
        <a href="http://www.codeforamerica.org/brigade" class="global-header-logo">
            <img src="http://www.codeforamerica.org/assets/logo.png" />
        </a>
        <p class="skip-to-nav"><a href="#global-footer">Menu</a></p>

        <nav class="nav-global-secondary">
          <ul>
            <li><a href="/about">About</a></li>
          </ul>
        </nav>
      </div>

      <main role="main">

        <section>
          <div class="layout-semibreve">
            <h1 id="title"></h1>
            <h2 id="description"></h2>
            <p id="readme"></p>
          </div>
        </section>

        <section class="slab-blue">
          <div class="layout-semibreve">
            <h1>Discussions</h1>
            <h2>These discussions are actually github issues</h2>
            <ul id="discussions">
            </ul>
          </div>
        </section>

        <section class="slab-red">
          <div class="layout-semibreve">
            <h1>Justice Projects</h1>
            <h2>These projects all have the word "justice" somewhere in them.</h2>
            <ul id="projects">
            </ul>
          </div>
        </section>

        <section>
          <div class="layout-semibreve">
            <h1>Help Wanted</h1>
            <h2>Open Issues from those Justice projects</h2>
          </div>
          <iframe id="widget" src="http://codeforamerica.org/geeks/civicissues/widget?labels=help%20wanted&amp;number=3&amp;tracking=false" width="100%" height="452px" frameborder="0"> </iframe>
        </section>

        <section class="slab-teal">
          <div class="layout-semibreve">
            <h1>People</h1>
            <h2>What if we pulled in people from the peopledb?</h2>
          </div>
        </section>




      </main>

    </div>

  </body>

  <script>
    $.getJSON("https://api.github.com/repos/codeforamerica/copcop", function(response){
      $("#title").text(response.name);
      $("#description").text(response.description);
    });

    $.get("https://api.github.com/repos/codeforamerica/copcop/contents/README.md", function(response){
      var raw = window.atob(response.content);
      var converter = new Markdown.Converter();
      readme = converter.makeHtml(raw);
      $("#readme").html(readme);
    });

    $.getJSON("http://codeforamerica.org/api/projects?q=justice", function(response){
      $.each(response.objects, function(i, project){
        console.log(project.name);
        var html = "<li>";
        html += "<h3><a href=" + project.code_url +">" + project.name + "</a></h3>";
        html += "<p>" + project.description + "</p>";
        html += "</li>";
        $("#projects").append(html);
      })
    });

    $.getJSON("https://api.github.com/repos/codeforamerica/copcop/issues", function(response){
      $.each(response, function(i, discussion){
        var html = "<li><h3><a href=" + discussion.url + ">" + discussion.title + "</a></h3>";
        html += "<p>" + discussion.body + "</p>";
        html += "</li>";
        $("#discussions").append(html);
      })
    });


  </script>

</html>
